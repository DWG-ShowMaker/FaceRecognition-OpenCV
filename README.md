# 人脸识别系统

这是一个使用OpenCV和Python实现的人脸识别系统，支持人脸录入和验证功能，具有现代化的图形界面。

## 功能特性

- 实时摄像头人脸检测
- 人脸特征录入和验证
- 完整的用户管理系统：
  - 添加新用户
  - 删除现有用户
  - 修改用户信息
  - 重新采集人脸数据
- 用户验证历史记录
- 实时状态显示和视觉反馈：
  - 绿色状态块：验证通过
  - 红色状态块：验证失败
  - 蓝色状态块：录入/采集中
- 响应式图形用户界面(GUI)
- 用户搜索功能

## 技术栈

- Python 3.x
- OpenCV-Python (图像处理和人脸识别)
- tkinter (GUI界面)
- PIL/Pillow (图像处理)
- Threading (多线程处理)
- LBPH人脸识别算法

## 安装依赖

1. 安装所需的 Python 包：
   
   ```bash
   pip install opencv-contrib-python
   pip install pillow
   ```

注意：必须使用 opencv-contrib-python 而不是普通的 opencv-python，因为人脸识别功能需要 contrib 模块。

## 启动方法

1. 确保已安装所有依赖包
2. 在命令行中进入程序所在目录
3. 运行以下命令启动程序：

   ```bash
   python face_detector.py
   ```

## 使用说明

1. 程序启动后会显示GUI界面，包含：
   - 左侧：摄像头视频显示区域（自适应大小）
   - 右侧：控制面板
     - 用户信息输入
     - 功能按钮
     - 状态显示
     - 用户管理区域

2. 人脸录入：
   - 输入用户名
   - 点击"录入人脸"按钮
   - 保持面部在摄像头前，系统会自动采集20张人脸样本
   - 右上角蓝色状态块显示采集进度
   - 采集完成后自动保存

3. 人脸验证：
   - 点击"开始验证"按钮
   - 将面部对准摄像头
   - 系统会实时显示验证结果
   - 右上角状态块显示验证结果（绿色为通过，红色为失败）

4. 用户管理：
   - 支持用户搜索（实时过滤）
   - 选择用户后可以：
     - 删除用户
     - 修改用户名
     - 重新采集人脸
   - 显示用户详细信息：
     - 用户ID
     - 注册时间
     - 最后验证时间
     - 最后更新时间

5. 其他操作：
   - 点击"停止"按钮可以停止当前操作
   - 窗口大小可调整，界面会自适应

## 注意事项

1. 确保电脑有可用的摄像头
2. 录入人脸时保持适当的光线条件
3. 录入时尽量展示不同角度的面部表情
4. 验证时保持自然表情
5. 首次使用时需要先录入人脸
6. 程序会自动保存用户数据和训练模型

## 数据存储

- 用户数据存储在 `face_data` 目录下
- 人脸识别模型保存为 `face_model.yml`
- 用户信息保存在 `face_data/users.pkl` 文件中